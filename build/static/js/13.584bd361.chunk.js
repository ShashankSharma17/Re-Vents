(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{809:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return c});var n=a(162),r=function(){return{type:n.c}},o=function(){return{type:n.b}},c=function(){return{type:n.a}}},812:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(129);t.a=function(e){var t=e.input,a=e.width,n=e.type,c=e.placeholder,s=e.meta,i=s.touched,l=s.error;return r.a.createElement(o.i.Field,{error:i&&!!l,width:a},r.a.createElement("input",Object.assign({},t,{placeholder:c,type:n})),i&&l&&r.a.createElement(o.o,{basic:!0,color:"red"},l))}},817:function(e,t,a){"use strict";a.d(t,"h",function(){return v}),a.d(t,"i",function(){return g}),a.d(t,"b",function(){return w}),a.d(t,"f",function(){return E}),a.d(t,"e",function(){return y}),a.d(t,"a",function(){return x}),a.d(t,"d",function(){return j}),a.d(t,"c",function(){return O}),a.d(t,"g",function(){return k});var n=a(47),r=a(26),o=a(806),c=a.n(o),s=a(816),i=a(807),l=a(808),u=a.n(l),p=a(159),d=a(830),m=a.n(d),h=a(809),f=a(219),b=a(131),v=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n,r){var o,i,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,i=o(),e.isLoaded,e.isEmpty,(l=Object(s.a)(e,["isLoaded","isEmpty"])).dateOfBirth!==n().firebase.profile.dateOfBirth&&(l.dateOfBirth=u()(l.dateOfBirth).toDate()),t.prev=4,t.next=7,i.updateProfile(l);case 7:p.toastr.success("Success","Profile updated"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[4,10]])}));return function(e,a,n){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var t=Object(i.a)(c.a.mark(function t(a,n,r){var o,s,i,l,u,p,d,f,b,v;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,s=r.getFirestore,i=m()(),l=o(),u=s(),p=l.auth().currentUser,d="".concat(p.uid,"/user_images"),f={name:i},t.prev=7,a(Object(h.c)()),t.next=11,l.uploadFile(d,e,null,f);case 11:return b=t.sent,t.next=14,b.uploadTaskSnapshot.downloadURL;case 14:return v=t.sent,t.next=17,u.get("users/".concat(p.uid));case 17:if(t.sent.data().photoURL){t.next=23;break}return t.next=21,l.updateProfile({photoURL:v});case 21:return t.next=23,p.updateProfile({photoURL:v});case 23:return t.next=25,u.add({collection:"users",doc:p.uid,subcollections:[{collection:"photos"}]},{name:i,url:v});case 25:a(Object(h.b)()),t.next=33;break;case 28:throw t.prev=28,t.t0=t.catch(7),console.log(t.t0),a(Object(h.a)()),new Error("Problem uploading photo");case 33:case"end":return t.stop()}},t,null,[[7,28]])}));return function(e,a,n){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n,r){var o,s,i,l,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,s=r.getFirestore,i=o(),l=s(),u=i.auth().currentUser,t.prev=4,t.next=7,i.deleteFile("".concat(u.uid,"/user_images/").concat(e.name));case 7:return t.next=9,l.delete({collection:"users",doc:u.uid,subcollections:[{collection:"photos",doc:e.id}]});case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(4),console.log(t.t0),new Error("Problem deleting the photo");case 15:case"end":return t.stop()}},t,null,[[4,11]])}));return function(e,a,n){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n){var o,s,i,l,u,p,d,m,b,v;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(h.c)()),o=f.a.firestore(),s=f.a.auth().currentUser,i=new Date(Date.now()),l=o.collection("users").doc(s.uid),u=o.collection("event_attendee"),t.prev=6,p=o.batch(),t.next=10,p.update(l,{photoURL:e.url});case 10:return t.next=12,u.where("userUid","==",s.uid).where("eventDate",">",i);case 12:return d=t.sent,t.next=15,d.get();case 15:m=t.sent,b=0;case 17:if(!(b<m.docs.length)){t.next=28;break}return t.next=20,o.collection("events").doc(m.docs[b].data().eventId);case 20:return v=t.sent,t.next=23,v.get();case 23:t.sent.data().hostUid===s.uid?p.update(v,Object(r.a)({hostPhotoURL:e.url},"attendees.".concat(s.uid,".photoURL"),e.url)):p.update(v,Object(r.a)({},"attendees.".concat(s.uid,".photoURL"),e.url));case 25:b++,t.next=17;break;case 28:return console.log(p),t.next=31,p.commit();case 31:a(Object(h.b)()),t.next=39;break;case 34:throw t.prev=34,t.t0=t.catch(6),console.log(t.t0),a(Object(h.a)()),new Error("Problem setting main photo");case 39:case"end":return t.stop()}},t,null,[[6,34]])}));return function(e,a){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n){var o,s,l,u,d,m;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(h.c)()),o=f.a.firestore(),s=f.a.auth().currentUser,l=n().firebase.profile,u={going:!0,joinDate:Date.now(),photoURL:l.photoURL||"/assets/user.png",displayName:l.displayName,host:!1},t.prev=5,d=o.collection("events").doc(e.id),m=o.collection("event_attendee").doc("".concat(e.id,"_").concat(s.uid)),t.next=10,o.runTransaction(function(){var t=Object(i.a)(c.a.mark(function t(a){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.get(d);case 2:return t.next=4,a.update(d,Object(r.a)({},"attendees.".concat(s.uid),u));case 4:return t.next=6,a.set(m,{eventId:e.id,userUid:s.uid,eventDate:e.date,host:!1});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 10:a(Object(h.b)()),p.toastr.success("Success","You have signed up to the event"),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0),a(Object(h.a)()),p.toastr.error("Oops","Problem signing up to event");case 19:case"end":return t.stop()}},t,null,[[5,14]])}));return function(e,a){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n,o){var s,i,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.getFirestore,i=s(),l=i.auth().currentUser,t.prev=3,t.next=6,i.update("events/".concat(e.id),Object(r.a)({},"attendees.".concat(l.uid),i.FieldValue.delete()));case 6:return t.next=8,i.delete("event_attendee/".concat(e.id,"_").concat(l.uid));case 8:p.toastr.success("Success","You have removed yourself from the event"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),p.toastr.error("Oops","something went wrong");case 15:case"end":return t.stop()}},t,null,[[3,11]])}));return function(e,a,n){return t.apply(this,arguments)}}()},j=function(e,t){return function(){var a=Object(i.a)(c.a.mark(function a(r,o){var s,i,l,u,p,d,m,v;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r(Object(h.c)()),s=f.a.firestore(),i=new Date(Date.now()),l=s.collection("event_attendee"),a.t0=t,a.next=1===a.t0?7:2===a.t0?9:3===a.t0?11:13;break;case 7:return u=l.where("userUid","==",e).where("eventDate","<=",i).orderBy("eventDate","desc"),a.abrupt("break",14);case 9:return u=l.where("userUid","==",e).where("eventDate",">=",i).orderBy("eventDate"),a.abrupt("break",14);case 11:return u=l.where("userUid","==",e).where("host","==",!0).orderBy("eventDate","desc"),a.abrupt("break",14);case 13:u=l.where("userUid","==",e).orderBy("eventDate","desc");case 14:return a.prev=14,a.next=17,u.get();case 17:p=a.sent,d=[],m=0;case 20:if(!(m<p.docs.length)){a.next=28;break}return a.next=23,s.collection("events").doc(p.docs[m].data().eventId).get();case 23:v=a.sent,d.push(Object(n.a)({},v.data(),{id:v.id}));case 25:m++,a.next=20;break;case 28:r({type:b.c,payload:{events:d}}),r(Object(h.b)()),a.next=36;break;case 32:a.prev=32,a.t1=a.catch(14),console.log(a.t1),r(Object(h.a)());case 36:case"end":return a.stop()}},a,null,[[14,32]])}));return function(e,t){return a.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n,r){var o,s,i,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirestore,s=o(),i=s.auth().currentUser,l={photoURL:e.photoURL||"/assets/user.png",city:e.city||"unknown city",displayName:e.displayName},t.prev=4,t.next=7,s.set({collection:"users",doc:i.uid,subcollections:[{collection:"following",doc:e.id}]},l);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),console.log(t.t0);case 12:case"end":return t.stop()}},t,null,[[4,9]])}));return function(e,a,n){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(i.a)(c.a.mark(function t(a,n,r){var o,s,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirestore,s=o(),i=s.auth().currentUser,t.prev=3,t.next=6,s.delete({collection:"users",doc:i.uid,subcollections:[{collection:"following",doc:e.id}]});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[3,8]])}));return function(e,a,n){return t.apply(this,arguments)}}()}},825:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(129);t.a=function(e){var t=e.input,a=e.rows,n=(e.type,e.placeholder),c=e.meta,s=c.touched,i=c.error;return r.a.createElement(o.i.Field,{error:s&&!!i},r.a.createElement("textarea",Object.assign({},t,{placeholder:n,rows:a})),s&&i&&r.a.createElement(o.o,{basic:!0,color:"red"},i))}},835:function(e,t,a){"use strict";var n=a(47),r=a(153),o=a(154),c=a(156),s=a(155),i=a(157),l=a(0),u=a.n(l),p=a(129),d=a(871),m=a.n(d),h=a(892),f=a.n(h),b={autocompleteContainer:{zIndex:1e3}},v=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={scriptLoaded:!1},a.handleScriptLoaded=function(){return a.setState({scriptLoaded:!0})},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.input,a=e.width,r=e.onSelect,o=e.placeholder,c=e.options,s=e.meta,i=s.touched,l=s.error;return u.a.createElement(p.i.Field,{error:i&&!!l,width:a},u.a.createElement(m.a,{url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDUX8SIqI2_TkxTUFkNQeqIyO4urAqgrt0&libraries=places",onLoad:this.handleScriptLoaded}),this.state.scriptLoaded&&u.a.createElement(f.a,{inputProps:Object(n.a)({},t,{placeholder:o}),options:c,onSelect:r,styles:b}),i&&l&&u.a.createElement(p.o,{basic:!0,color:"red"},l))}}]),t}(l.Component);t.a=v},836:function(e,t,a){"use strict";a.d(t,"a",function(){return p}),a.d(t,"b",function(){return d}),a.d(t,"c",function(){return m}),a.d(t,"d",function(){return h});var n=a(47),r=a(806),o=a.n(r),c=a(807),s=a(832),i=a(801),l=a(159),u=a(292),p=function(e){return function(){var t=Object(c.a)(o.a.mark(function t(a,n,r){var c,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,i=c(),t.prev=2,t.next=5,i.auth().signInWithEmailAndPassword(e.email,e.password);case 5:a(Object(u.a)()),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),console.log(t.t0),new s.a({_error:"Login Failed"});case 12:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e,a,n){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(o.a.mark(function t(a,r,c){var i,l,p,d,m,h;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.getFirebase,l=c.getFirestore,p=i(),d=l(),t.prev=3,t.next=6,p.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return m=t.sent,console.log(m),t.next=10,m.updateProfile({displayName:e.displayName});case 10:return h={displayName:e.displayName,createdAt:d.FieldValue.serverTimestamp()},t.next=13,d.set("users/".concat(m.uid),Object(n.a)({},h));case 13:a(Object(u.a)()),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(3),console.log(t.t0),new s.a({_error:t.t0.message});case 20:case"end":return t.stop()}},t,null,[[3,16]])}));return function(e,a,n){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(o.a.mark(function t(a,n,r){var c,s,i,l,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.getFirestore,i=c(),l=s(),t.prev=3,a(Object(u.a)()),t.next=7,i.login({provider:e,type:"popup"});case 7:if(!(p=t.sent).additionalUserInfo.isNewUser){t.next=11;break}return t.next=11,l.set("users/".concat(p.user.uid),{displayName:p.profile.displayName,photoURL:p.profile.avatarUrl,createdAt:l.FieldValue.serverTimestamp()});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[3,13]])}));return function(e,a,n){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(o.a.mark(function t(a,n,r){var c,u,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,u=c(),p=u.auth().currentUser,t.prev=3,t.next=6,p.updatePassword(e.newPassword1);case 6:return t.next=8,a(Object(i.a)("account"));case 8:l.toastr.success("Success!","Your password has been updated"),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(3),new s.a({_error:t.t0.message});case 14:case"end":return t.stop()}},t,null,[[3,11]])}));return function(e,a,n){return t.apply(this,arguments)}}()}},893:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(129);t.a=function(e){var t=e.input,a=(e.type,e.placeholder),n=e.multiple,c=e.options,s=e.meta,i=s.touched,l=s.error;return r.a.createElement(o.i.Field,{error:i&&!!l},r.a.createElement(o.u,{value:t.value||null,onChange:function(e,a){return t.onChange(a.value)},placeholder:a,options:c,multiple:n}),i&&l&&r.a.createElement(o.o,{basic:!0,color:"red"},l))}},894:function(e,t,a){"use strict";var n=a(816),r=a(0),o=a.n(r),c=a(129),s=a(906),i=(a(898),a(808)),l=a.n(i);t.a=function(e){var t=e.input,a=t.value,r=t.onChange,i=Object(n.a)(t,["value","onChange"]),u=e.width,p=e.placeholder,d=e.meta,m=d.touched,h=d.error,f=Object(n.a)(e,["input","width","placeholder","meta"]);return o.a.createElement(c.i.Field,{error:m&&!!h,width:u},o.a.createElement(s.a,Object.assign({},f,{placeholderText:p,selected:a?l()(a):null,onChange:r},i)),m&&h&&o.a.createElement(c.o,{basic:!0,color:"red"},h))}},966:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(158),c=a(129),s=a(30),i=function(){return r.a.createElement(c.j.Column,{width:4},r.a.createElement(c.r,{vertical:!0},r.a.createElement(c.k,{icon:"user",attached:!0,inverted:!0,color:"grey",content:"Profile"}),r.a.createElement(c.r.Item,{as:s.c,to:"/settings/basic"},"Basics"),r.a.createElement(c.r.Item,{as:s.c,to:"/settings/about"},"About Me"),r.a.createElement(c.r.Item,{as:s.c,to:"/settings/photos"},"My Photos")),r.a.createElement(c.j.Row,null),r.a.createElement(c.r,{vertical:!0},r.a.createElement(c.k,{icon:"settings",attached:!0,inverted:!0,color:"grey",content:"Account"}),r.a.createElement(c.r.Item,{as:s.c,to:"/settings/account"},"My Account")))},l=a(153),u=a(154),p=a(156),d=a(155),m=a(157),h=a(838),f=a(837),b=a(808),v=a.n(b),g=a(894),w=a(835),E=a(812),y=function(e){var t=e.input,a=(e.width,e.type),n=e.label;return r.a.createElement(c.i.Field,null,r.a.createElement("div",{className:"ui radio"},r.a.createElement("input",Object.assign({},t,{type:a}))," ",r.a.createElement("label",null,n)))},x=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pristine,a=e.submitting,n=e.handleSubmit,o=e.updateProfile;return r.a.createElement(c.t,null,r.a.createElement(c.k,{dividing:!0,size:"large",content:"Basics"}),r.a.createElement(c.i,{onSubmit:n(o)},r.a.createElement(h.a,{width:8,name:"displayName",type:"text",component:E.a,placeholder:"Known As"}),r.a.createElement(c.i.Group,{inline:!0},r.a.createElement("label",null,"Gender: "),r.a.createElement(h.a,{name:"gender",type:"radio",value:"male",label:"Male",component:y}),r.a.createElement(h.a,{name:"gender",type:"radio",value:"female",label:"Female",component:y})),r.a.createElement(h.a,{width:8,name:"dateOfBirth",component:g.a,placeholder:"Date of Birth",dateFormat:"YYYY-MM-DD",showYearDropdown:!0,showMonthDropdown:!0,dropdownMode:"select",maxDate:v()().subtract(18,"years")}),r.a.createElement(h.a,{name:"city",placeholder:"Home Town",options:{types:["(cities)"]},label:"Female",component:w.a,width:8}),r.a.createElement(c.f,null),r.a.createElement(c.a,{disabled:t||a,size:"large",positive:!0,content:"Update Profile"})))}}]),t}(n.Component),j=Object(f.a)({form:"userProfile",enableReinitialize:!0,destroyOnUnmount:!1})(x),O=a(825),k=a(893),P=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],U=Object(f.a)({form:"userProfile",enableReinitialize:!0,destroyOnUnmount:!1})(function(e){var t=e.pristine,a=e.submitting,n=e.handleSubmit,o=e.updateProfile;return r.a.createElement(c.t,null,r.a.createElement(c.k,{dividing:!0,size:"large",content:"About Me"}),r.a.createElement("p",null,"Complete your profile to get the most out of this site"),r.a.createElement(c.i,{onSubmit:n(o)},r.a.createElement(c.i.Group,{inline:!0},r.a.createElement("label",null,"Tell us your status: "),r.a.createElement(h.a,{name:"status",component:y,type:"radio",value:"single",label:"Single"}),r.a.createElement(h.a,{name:"status",component:y,type:"radio",value:"relationship",label:"Relationship"}),r.a.createElement(h.a,{name:"status",component:y,type:"radio",value:"married",label:"Married"})),r.a.createElement(c.f,null),r.a.createElement("label",null,"Tell us about yourself"),r.a.createElement(h.a,{name:"about",component:O.a,placeholder:"About Me"}),r.a.createElement(h.a,{name:"interests",component:k.a,options:P,value:"interests",multiple:!0,placeholder:"Select your interests"}),r.a.createElement(h.a,{width:8,name:"occupation",type:"text",component:E.a,placeholder:"Occupation"}),r.a.createElement(h.a,{width:8,name:"origin",options:{types:["(regions)"]},component:w.a,placeholder:"Country of Origin"}),r.a.createElement(c.f,null),r.a.createElement(c.a,{disabled:t||a,size:"large",positive:!0,content:"Update Profile"})))}),F=a(806),C=a.n(F),R=a(807),D=a(159),S=a(130),L=a(77),I=a(961),A=a(929),M=a.n(A),N=(a(931),a(817)),B={uploadProfileImage:N.i,deletePhoto:N.b,setMainPhoto:N.f},z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={files:[],fileName:"",cropResult:null,image:{}},a.uploadImage=Object(R.a)(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.uploadProfileImage(a.state.image,a.state.fileName);case 3:a.cancelCrop(),D.toastr.success("Success!","Photo has been uploaded"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),D.toastr.error("Oops",e.t0.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a.handlePhotoDelete=function(e){return Object(R.a)(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{a.props.deletePhoto(e)}catch(n){D.toastr.error("Oops",n.message)}case 1:case"end":return t.stop()}},t)}))},a.handleSetMainPhoto=function(e){return Object(R.a)(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{a.props.setMainPhoto(e)}catch(n){D.toastr.error("Oops",n.message)}case 1:case"end":return t.stop()}},t)}))},a.cancelCrop=function(){a.setState({files:[],image:{}})},a.cropImage=function(){"undefined"!==typeof a.refs.cropper.getCroppedCanvas()&&a.refs.cropper.getCroppedCanvas().toBlob(function(e){var t=URL.createObjectURL(e);a.setState({cropResult:t,image:e})},"image/jpeg")},a.onDrop=function(e){a.setState({files:e,fileName:e[0].name})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.photos,o=a.profile,s=a.loading;return n&&(e=n.filter(function(e){return e.url!==o.photoURL})),r.a.createElement(c.t,null,r.a.createElement(c.k,{dividing:!0,size:"large",content:"Your Photos"}),r.a.createElement(c.j,null,r.a.createElement(c.j.Row,null),r.a.createElement(c.j.Column,{width:4},r.a.createElement(c.k,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement(I.a,{onDrop:this.onDrop,multiple:!1},r.a.createElement("div",{style:{paddingTop:"30px",textAlign:"center"}},r.a.createElement(c.l,{name:"upload",size:"huge"}),r.a.createElement(c.k,{content:"Drop image here or click to add"})))),r.a.createElement(c.j.Column,{width:1}),r.a.createElement(c.j.Column,{width:4},r.a.createElement(c.k,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),this.state.files[0]&&r.a.createElement(M.a,{style:{height:200,width:"100%"},ref:"cropper",src:this.state.files[0].preview,aspectRatio:1,viewMode:0,dragMode:"move",guides:!1,scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:this.cropImage})),r.a.createElement(c.j.Column,{width:1}),r.a.createElement(c.j.Column,{width:4},r.a.createElement(c.k,{sub:!0,color:"teal",content:"Step 3 - Preview and Upload"}),this.state.files[0]&&r.a.createElement("div",null,r.a.createElement(c.m,{style:{minHeight:"200px",minWidth:"200px"},src:this.state.cropResult}),r.a.createElement(c.a.Group,null,r.a.createElement(c.a,{onClick:this.uploadImage,style:{width:"100px"},positive:!0,icon:"check",loading:s}),r.a.createElement(c.a,{disabled:s,onClick:this.cancelCrop,style:{width:"100px"},icon:"close"}))))),r.a.createElement(c.f,null),r.a.createElement(c.k,{sub:!0,color:"teal",content:"All Photos"}),r.a.createElement(c.b.Group,{itemsPerRow:5},r.a.createElement(c.b,null,r.a.createElement(c.m,{src:o.photoURL||"/assets/user.png"}),r.a.createElement(c.a,{positive:!0},"Main Photo")),n&&e.map(function(e){return r.a.createElement(c.b,{key:e.id},r.a.createElement(c.m,{src:e.url}),r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(c.a,{loading:s,onClick:t.handleSetMainPhoto(e),basic:!0,color:"green"},"Main"),r.a.createElement(c.a,{onClick:t.handlePhotoDelete(e),basic:!0,icon:"trash",color:"red"})))})))}}]),t}(n.Component),T=Object(L.compose)(Object(o.connect)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile,photos:e.firestore.ordered.photos,loading:e.async.loading}},B),Object(S.firestoreConnect)(function(e){return[{collection:"users",doc:e.auth.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]}))(z),_=a(834),G=Object(_.combineValidators)({newPassword1:Object(_.isRequired)({message:"Please enter a password"}),newPassword2:Object(_.composeValidators)(Object(_.isRequired)({message:"Please confirm your new password"}),Object(_.matchesField)("newPassword1")({message:"Passwords do not match"}))()}),Y=Object(f.a)({form:"account",validate:G})(function(e){var t=e.error,a=e.invalid,n=e.submitting,o=e.handleSubmit,s=e.updatePassword,i=e.providerId;return r.a.createElement(c.t,null,r.a.createElement(c.k,{dividing:!0,size:"large",content:"Account"}),i&&"password"===i&&r.a.createElement("div",null,r.a.createElement(c.k,{color:"teal",sub:!0,content:"Change password"}),r.a.createElement("p",null,"Use this form to update your account settings"),r.a.createElement(c.i,{onSubmit:o(s)},r.a.createElement(h.a,{width:8,name:"newPassword1",type:"password",pointing:"left",inline:!0,component:E.a,basic:!0,placeholder:"New Password"}),r.a.createElement(h.a,{width:8,name:"newPassword2",type:"password",inline:!0,basic:!0,pointing:"left",component:E.a,placeholder:"Confirm Password"}),t&&r.a.createElement(c.o,{basic:!0,color:"red"},t),r.a.createElement(c.f,null),r.a.createElement(c.a,{disabled:a||n,size:"large",positive:!0,content:"Update Password"}))),i&&"facebook.com"===i&&r.a.createElement("div",null,r.a.createElement(c.k,{color:"teal",sub:!0,content:"Facebook Account"}),r.a.createElement("p",null,"Please visit Facebook to update your account settings"),r.a.createElement(c.a,{type:"button",color:"facebook"},r.a.createElement(c.l,{name:"facebook"}),"Go to Facebook")),i&&"google.com"===i&&r.a.createElement("div",null,r.a.createElement(c.k,{color:"teal",sub:!0,content:"Google Account"}),r.a.createElement("p",null,"Please visit Google to update your account settings"),r.a.createElement(c.a,{type:"button",color:"google plus"},r.a.createElement(c.l,{name:"google plus"}),"Go to Google")))}),V={updatePassword:a(836).d,updateProfile:N.h};t.default=Object(o.connect)(function(e){return{providerId:e.firebase.auth.providerData[0].providerId,user:e.firebase.profile}},V)(function(e){var t=e.updatePassword,a=e.providerId,n=e.user,o=e.updateProfile;return r.a.createElement(c.j,null,r.a.createElement(c.j.Column,{width:12},r.a.createElement(s.f,null,r.a.createElement(s.d,{exact:!0,from:"/settings",to:"/settings/basic"}),r.a.createElement(s.e,{path:"/settings/basic",render:function(){return r.a.createElement(j,{initialValues:n,updateProfile:o})}}),r.a.createElement(s.e,{path:"/settings/about",render:function(){return r.a.createElement(U,{initialValues:n,updateProfile:o})}}),r.a.createElement(s.e,{path:"/settings/photos",component:T}),r.a.createElement(s.e,{path:"/settings/account",render:function(){return r.a.createElement(Y,{updatePassword:t,providerId:a})}}))),r.a.createElement(c.j.Column,{width:4},r.a.createElement(i,null)))})}}]);
//# sourceMappingURL=13.584bd361.chunk.js.map