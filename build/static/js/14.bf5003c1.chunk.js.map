{"version":3,"sources":["features/async/asyncActions.jsx","app/common/util/helpers.js","features/user/userActions.jsx","features/event/eventActions.jsx","app/common/form/TextArea.jsx","features/event/EventDetailed/EventDetailedHeader.jsx","features/event/EventDetailed/EventDetailedMap.jsx","features/event/EventDetailed/EventDetailedInfo.jsx","features/event/EventDetailed/EventDetailedChatForm.jsx","features/event/EventDetailed/EventDetailedChat.jsx","features/event/EventDetailed/EventDetailedSidebar.jsx","features/event/EventDetailed/EventDetailedPage.jsx"],"names":["__webpack_require__","d","__webpack_exports__","asyncActionStart","asyncActionFinish","asyncActionError","_asyncConstants__WEBPACK_IMPORTED_MODULE_0__","type","ASYNC_ACTION_START","ASYNC_ACTION_FINISH","ASYNC_ACTION_ERROR","objectToArray","object","Object","entries","map","e","assign","id","createNewEvent","user","photoURL","event","date","moment","toDate","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","hostUid","uid","hostedBy","displayName","hostPhotoURL","created","Date","now","attendees","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","going","joinDate","host","createDataTree","dataset","hashTable","create","forEach","a","childNodes","dataTree","parentId","push","updateProfile","_ref2","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","mark","_callee","dispatch","getState","_ref","getFirebase","firebase","updatedUser","wrap","_context","prev","next","isLoaded","isEmpty","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__","dateOfBirth","profile","toastr","success","t0","console","log","stop","_x","_x2","_x3","apply","this","arguments","uploadProfileImage","file","fileName","_ref4","_callee2","_ref3","getFirestore","imageName","firestore","path","options","uploadedFile","downloadURL","_context2","cuid","auth","currentUser","concat","name","uploadFile","sent","uploadTaskSnapshot","get","data","add","collection","doc","subcollections","url","Error","_x4","_x5","_x6","deletePhoto","photo","_ref6","_callee3","_ref5","_context3","deleteFile","delete","_x7","_x8","_x9","setMainPhoto","_ref7","_callee4","today","userDocRef","eventAttendeeRef","batch","eventQuery","eventQuerySnap","i","eventDocRef","_context4","update","where","docs","length","eventId","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","commit","_x10","_x11","goingToEvent","_ref8","_callee6","attendee","eventAttendeeDocRef","_context6","runTransaction","_ref9","_callee5","transaction","_context5","set","userUid","eventDate","_x14","error","_x12","_x13","cancelGoingToEvent","_ref11","_callee7","_ref10","_context7","FieldValue","_x15","_x16","_x17","getUserEvents","activeTab","_ref12","_callee8","eventsRef","query","querySnap","events","evt","_context8","orderBy","abrupt","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","FETCH_EVENTS","payload","t1","_x18","_x19","followUser","userToFollow","_ref14","_callee9","_ref13","following","_context9","city","_x20","_x21","_x22","unfollowUser","userToUnfollow","_ref16","_callee10","_ref15","_context10","_x23","_x24","_x25","createEvent","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","E_Projects_Web_Projects_Re_Vents_revents_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","newEvent","createdEvent","updateEvent","eventAttendeeQuery","eventAttendeeQuerySnap","compareAsc","ordered","cancelToggle","cancelled","message","confirm","onOk","getEventsForDashboard","lastEvent","startAfter","limit","addEventComment","values","newComment","text","comment","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","semantic_ui_react__WEBPACK_IMPORTED_MODULE_1__","TextArea","input","rows","placeholder","_ref$meta","meta","touched","createElement","Field","basic","color","eventImageStyle","filter","eventImageTextStyle","position","bottom","left","width","height","EventDetailedHeader","loading","isHost","isGoing","authenticated","openModal","react_default","es","Group","attached","style","padding","src","category","fluid","Content","size","content","title","format","onClick","as","Link","to","Marker","EventDetailedMap","lat","lng","center","google_map_react_lib_default","bootstrapURLKeys","key","defaultCenter","defaultZoom","EventDetailedMap_Marker","EventDetailedInfo","state","showMap","showMapToggle","_this","setState","prevState","props","Column","description","verticalAlign","venue","EventDetailed_EventDetailedMap","venueLatLng","Component","EventDetailedChatForm","handleCommentSubmit","_this$props","reset","closeForm","onSubmit","handleSubmit","component","labelPosition","icon","primary","reduxForm","Fields","EventDetailedChat","showReplyForm","selectedCommentId","handleCloseReplyForm","handleOpenReplyForm","_this2","eventChat","_this$state","textAlign","inverted","border","Avatar","Author","Metadata","distanceInWords","Text","Actions","Action","EventDetailed_EventDetailedChatForm","form","child","EventDetailedSidebar","secondary","relaxed","divided","ribbon","Image","Header","react_router_dom_es","actions","EventDetailedPage","initialLoading","match","params","exists","history","setListener","unsetListener","_this$props3","requesting","sort","b","some","chatTree","LoadingComponent","EventDetailed_EventDetailedHeader","EventDetailed_EventDetailedInfo","EventDetailed_EventDetailedChat","EventDetailed_EventDetailedSidebar","compose","withFirestore","connect","ownProps","status","async","event_chat","firebaseConnect"],"mappings":"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","file":"static/js/14.bf5003c1.chunk.js","sourcesContent":["import {\r\n  ASYNC_ACTION_ERROR,\r\n  ASYNC_ACTION_START,\r\n  ASYNC_ACTION_FINISH\r\n} from './asyncConstants'\r\n\r\nexport const asyncActionStart = () => {\r\n  return {\r\n    type: ASYNC_ACTION_START\r\n  }\r\n}\r\n\r\nexport const asyncActionFinish = () => {\r\n  return {\r\n    type: ASYNC_ACTION_FINISH\r\n  }\r\n}\r\n\r\nexport const asyncActionError = () => {\r\n  return {\r\n    type: ASYNC_ACTION_ERROR\r\n  }\r\n}\r\n","import moment from 'moment'\r\n\r\nexport const objectToArray = object => {\r\n  if (object) {\r\n    return Object.entries(object).map(e => Object.assign(e[1], { id: e[0] }))\r\n  }\r\n}\r\n\r\nexport const createNewEvent = (user, photoURL, event) => {\r\n  event.date = moment(event.date).toDate()\r\n  return {\r\n    ...event,\r\n    hostUid: user.uid,\r\n    hostedBy: user.displayName,\r\n    hostPhotoURL: photoURL || '/assets/user.png',\r\n    created: Date.now(),\r\n    attendees: {\r\n      [user.uid]: {\r\n        going: true,\r\n        joinDate: Date.now(),\r\n        photoURL: photoURL || '/assets/user.png',\r\n        displayName: user.displayName,\r\n        host: true\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const createDataTree = dataset => {\r\n  let hashTable = Object.create(null)\r\n  dataset.forEach(a => (hashTable[a.id] = { ...a, childNodes: [] }))\r\n  let dataTree = []\r\n  dataset.forEach(a => {\r\n    if (a.parentId) hashTable[a.parentId].childNodes.push(hashTable[a.id])\r\n    else dataTree.push(hashTable[a.id])\r\n  })\r\n  return dataTree\r\n}\r\n","import moment from 'moment'\r\nimport { toastr } from 'react-redux-toastr'\r\nimport cuid from 'cuid'\r\nimport {\r\n  asyncActionError,\r\n  asyncActionStart,\r\n  asyncActionFinish\r\n} from '../async/asyncActions'\r\nimport firebase from '../../app/config/firebase'\r\nimport { FETCH_EVENTS } from '../event/eventConstants'\r\n\r\nexport const updateProfile = user => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase }\r\n) => {\r\n  const firebase = getFirebase()\r\n  const { isLoaded, isEmpty, ...updatedUser } = user\r\n  if (updatedUser.dateOfBirth !== getState().firebase.profile.dateOfBirth) {\r\n    updatedUser.dateOfBirth = moment(updatedUser.dateOfBirth).toDate()\r\n  }\r\n\r\n  try {\r\n    await firebase.updateProfile(updatedUser)\r\n    toastr.success('Success', 'Profile updated')\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nexport const uploadProfileImage = (file, fileName) => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase, getFirestore }\r\n) => {\r\n  const imageName = cuid()\r\n  const firebase = getFirebase()\r\n  const firestore = getFirestore()\r\n  const user = firebase.auth().currentUser\r\n  const path = `${user.uid}/user_images`\r\n  const options = {\r\n    name: imageName\r\n  }\r\n  try {\r\n    dispatch(asyncActionStart())\r\n    // upload the file to fb storage\r\n    let uploadedFile = await firebase.uploadFile(path, file, null, options)\r\n    // get url of image\r\n    let downloadURL = await uploadedFile.uploadTaskSnapshot.downloadURL\r\n    // get the userdoc from firestore\r\n    let userDoc = await firestore.get(`users/${user.uid}`)\r\n    // check if user has photo, if not update profile\r\n    if (!userDoc.data().photoURL) {\r\n      await firebase.updateProfile({\r\n        photoURL: downloadURL\r\n      })\r\n      await user.updateProfile({\r\n        photoURL: downloadURL\r\n      })\r\n    }\r\n    // add the new photo to photos collection\r\n    await firestore.add(\r\n      {\r\n        collection: 'users',\r\n        doc: user.uid,\r\n        subcollections: [{ collection: 'photos' }]\r\n      },\r\n      {\r\n        name: imageName,\r\n        url: downloadURL\r\n      }\r\n    )\r\n    dispatch(asyncActionFinish())\r\n  } catch (error) {\r\n    console.log(error)\r\n    dispatch(asyncActionError())\r\n    throw new Error('Problem uploading photo')\r\n  }\r\n}\r\n\r\nexport const deletePhoto = photo => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase, getFirestore }\r\n) => {\r\n  const firebase = getFirebase()\r\n  const firestore = getFirestore()\r\n  const user = firebase.auth().currentUser\r\n  try {\r\n    await firebase.deleteFile(`${user.uid}/user_images/${photo.name}`)\r\n    await firestore.delete({\r\n      collection: 'users',\r\n      doc: user.uid,\r\n      subcollections: [{ collection: 'photos', doc: photo.id }]\r\n    })\r\n  } catch (error) {\r\n    console.log(error)\r\n    throw new Error('Problem deleting the photo')\r\n  }\r\n}\r\n\r\nexport const setMainPhoto = photo => async (dispatch, getState) => {\r\n  dispatch(asyncActionStart())\r\n  const firestore = firebase.firestore()\r\n  const user = firebase.auth().currentUser\r\n  const today = new Date(Date.now())\r\n  let userDocRef = firestore.collection('users').doc(user.uid)\r\n  let eventAttendeeRef = firestore.collection('event_attendee')\r\n  try {\r\n    let batch = firestore.batch()\r\n\r\n    await batch.update(userDocRef, {\r\n      photoURL: photo.url\r\n    })\r\n\r\n    let eventQuery = await eventAttendeeRef\r\n      .where('userUid', '==', user.uid)\r\n      .where('eventDate', '>', today)\r\n\r\n    let eventQuerySnap = await eventQuery.get()\r\n\r\n    for (let i = 0; i < eventQuerySnap.docs.length; i++) {\r\n      let eventDocRef = await firestore\r\n        .collection('events')\r\n        .doc(eventQuerySnap.docs[i].data().eventId)\r\n      let event = await eventDocRef.get()\r\n      if (event.data().hostUid === user.uid) {\r\n        batch.update(eventDocRef, {\r\n          hostPhotoURL: photo.url,\r\n          [`attendees.${user.uid}.photoURL`]: photo.url\r\n        })\r\n      } else {\r\n        batch.update(eventDocRef, {\r\n          [`attendees.${user.uid}.photoURL`]: photo.url\r\n        })\r\n      }\r\n    }\r\n    console.log(batch)\r\n    await batch.commit()\r\n    dispatch(asyncActionFinish())\r\n  } catch (error) {\r\n    console.log(error)\r\n    dispatch(asyncActionError())\r\n    throw new Error('Problem setting main photo')\r\n  }\r\n}\r\n\r\nexport const goingToEvent = event => async (dispatch, getState) => {\r\n  dispatch(asyncActionStart())\r\n  const firestore = firebase.firestore()\r\n  const user = firebase.auth().currentUser\r\n  const profile = getState().firebase.profile\r\n  const attendee = {\r\n    going: true,\r\n    joinDate: Date.now(),\r\n    photoURL: profile.photoURL || '/assets/user.png',\r\n    displayName: profile.displayName,\r\n    host: false\r\n  }\r\n  try {\r\n    let eventDocRef = firestore.collection('events').doc(event.id)\r\n    let eventAttendeeDocRef = firestore\r\n      .collection('event_attendee')\r\n      .doc(`${event.id}_${user.uid}`)\r\n\r\n    await firestore.runTransaction(async transaction => {\r\n      await transaction.get(eventDocRef)\r\n      await transaction.update(eventDocRef, {\r\n        [`attendees.${user.uid}`]: attendee\r\n      })\r\n      await transaction.set(eventAttendeeDocRef, {\r\n        eventId: event.id,\r\n        userUid: user.uid,\r\n        eventDate: event.date,\r\n        host: false\r\n      })\r\n    })\r\n    dispatch(asyncActionFinish())\r\n    toastr.success('Success', 'You have signed up to the event')\r\n  } catch (error) {\r\n    console.log(error)\r\n    dispatch(asyncActionError())\r\n    toastr.error('Oops', 'Problem signing up to event')\r\n  }\r\n}\r\n\r\nexport const cancelGoingToEvent = event => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirestore }\r\n) => {\r\n  const firestore = getFirestore()\r\n  const user = firestore.auth().currentUser\r\n  try {\r\n    await firestore.update(`events/${event.id}`, {\r\n      [`attendees.${user.uid}`]: firestore.FieldValue.delete()\r\n    })\r\n    await firestore.delete(`event_attendee/${event.id}_${user.uid}`)\r\n    toastr.success('Success', 'You have removed yourself from the event')\r\n  } catch (error) {\r\n    console.log(error)\r\n    toastr.error('Oops', 'something went wrong')\r\n  }\r\n}\r\n\r\nexport const getUserEvents = (userUid, activeTab) => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  dispatch(asyncActionStart())\r\n  const firestore = firebase.firestore()\r\n  const today = new Date(Date.now())\r\n  let eventsRef = firestore.collection('event_attendee')\r\n  let query\r\n  switch (activeTab) {\r\n    case 1: // past events\r\n      query = eventsRef\r\n        .where('userUid', '==', userUid)\r\n        .where('eventDate', '<=', today)\r\n        .orderBy('eventDate', 'desc')\r\n      break\r\n    case 2: // future events\r\n      query = eventsRef\r\n        .where('userUid', '==', userUid)\r\n        .where('eventDate', '>=', today)\r\n        .orderBy('eventDate')\r\n      break\r\n    case 3: // hosted events\r\n      query = eventsRef\r\n        .where('userUid', '==', userUid)\r\n        .where('host', '==', true)\r\n        .orderBy('eventDate', 'desc')\r\n      break\r\n    default:\r\n      query = eventsRef\r\n        .where('userUid', '==', userUid)\r\n        .orderBy('eventDate', 'desc')\r\n  }\r\n  try {\r\n    let querySnap = await query.get()\r\n    let events = []\r\n\r\n    for (let i = 0; i < querySnap.docs.length; i++) {\r\n      let evt = await firestore\r\n        .collection('events')\r\n        .doc(querySnap.docs[i].data().eventId)\r\n        .get()\r\n      events.push({ ...evt.data(), id: evt.id })\r\n    }\r\n\r\n    dispatch({ type: FETCH_EVENTS, payload: { events } })\r\n\r\n    dispatch(asyncActionFinish())\r\n  } catch (error) {\r\n    console.log(error)\r\n    dispatch(asyncActionError())\r\n  }\r\n}\r\n\r\nexport const followUser = userToFollow => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirestore }\r\n) => {\r\n  const firestore = getFirestore()\r\n  const user = firestore.auth().currentUser\r\n  const following = {\r\n    photoURL: userToFollow.photoURL || '/assets/user.png',\r\n    city: userToFollow.city || 'unknown city',\r\n    displayName: userToFollow.displayName\r\n  }\r\n  try {\r\n    await firestore.set(\r\n      {\r\n        collection: 'users',\r\n        doc: user.uid,\r\n        subcollections: [{ collection: 'following', doc: userToFollow.id }]\r\n      },\r\n      following\r\n    )\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nexport const unfollowUser = userToUnfollow => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirestore }\r\n) => {\r\n  const firestore = getFirestore()\r\n  const user = firestore.auth().currentUser\r\n  try {\r\n    await firestore.delete({\r\n      collection: 'users',\r\n      doc: user.uid,\r\n      subcollections: [{ collection: 'following', doc: userToUnfollow.id }]\r\n    })\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n","import moment from 'moment'\r\nimport { toastr } from 'react-redux-toastr'\r\nimport { createNewEvent } from '../../app/common/util/helpers'\r\nimport firebase from '../../app/config/firebase'\r\nimport {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart\r\n} from '../async/asyncActions'\r\nimport { FETCH_EVENTS } from './eventConstants'\r\nimport compareAsc from 'date-fns/compare_asc'\r\n\r\nexport const createEvent = event => {\r\n  return async (dispatch, getState, { getFirestore }) => {\r\n    const firestore = getFirestore()\r\n    const user = firestore.auth().currentUser\r\n    const photoURL = getState().firebase.profile.photoURL\r\n    let newEvent = createNewEvent(user, photoURL, event)\r\n    try {\r\n      let createdEvent = await firestore.add(`events`, newEvent)\r\n      await firestore.set(`event_attendee/${createdEvent.id}_${user.uid}`, {\r\n        eventId: createdEvent.id,\r\n        userUid: user.uid,\r\n        eventDate: event.date,\r\n        host: true\r\n      })\r\n      toastr.success('Success!', 'Event has been created')\r\n    } catch (error) {\r\n      toastr.error('Oops', 'Something went wrong')\r\n    }\r\n  }\r\n}\r\n\r\nexport const updateEvent = event => {\r\n  return async (dispatch, getState) => {\r\n    dispatch(asyncActionStart())\r\n    const firestore = firebase.firestore()\r\n    event.date = moment(event.date).toDate()\r\n    try {\r\n      let eventDocRef = firestore.collection('events').doc(event.id)\r\n      let dateEqual = compareAsc(\r\n        getState().firestore.ordered.events[0].date,\r\n        event.date\r\n      )\r\n      if (dateEqual !== 0) {\r\n        let batch = firestore.batch()\r\n        await batch.update(eventDocRef, event)\r\n\r\n        let eventAttendeeRef = firestore.collection('event_attendee')\r\n        let eventAttendeeQuery = await eventAttendeeRef.where(\r\n          'eventId',\r\n          '==',\r\n          event.id\r\n        )\r\n        let eventAttendeeQuerySnap = await eventAttendeeQuery.get()\r\n\r\n        for (let i = 0; i < eventAttendeeQuerySnap.docs.length; i++) {\r\n          let eventAttendeeDocRef = await firestore\r\n            .collection('event_attendee')\r\n            .doc(eventAttendeeQuerySnap.docs[i].id)\r\n\r\n          await batch.update(eventAttendeeDocRef, {\r\n            eventDate: event.date\r\n          })\r\n        }\r\n        await batch.commit()\r\n      } else {\r\n        await eventDocRef.update(event)\r\n      }\r\n      dispatch(asyncActionFinish())\r\n      toastr.success('Success!', 'Event has been updated')\r\n    } catch (error) {\r\n      dispatch(asyncActionError())\r\n      toastr.error('Oops', 'Something went wrong')\r\n    }\r\n  }\r\n}\r\n\r\nexport const cancelToggle = (cancelled, eventId) => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirestore }\r\n) => {\r\n  const firestore = getFirestore()\r\n  const message = cancelled\r\n    ? 'Are you sure you want to cancel the event?'\r\n    : 'This will reactivate the event - are you sure?Ì'\r\n  try {\r\n    toastr.confirm(message, {\r\n      onOk: () =>\r\n        firestore.update(`events/${eventId}`, {\r\n          cancelled: cancelled\r\n        })\r\n    })\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nexport const getEventsForDashboard = lastEvent => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  let today = new Date(Date.now())\r\n  const firestore = firebase.firestore()\r\n  const eventsRef = firestore.collection('events')\r\n  try {\r\n    dispatch(asyncActionStart())\r\n    let startAfter =\r\n      lastEvent &&\r\n      (await firestore\r\n        .collection('events')\r\n        .doc(lastEvent.id)\r\n        .get())\r\n    let query\r\n\r\n    lastEvent\r\n      ? (query = eventsRef\r\n          .where('date', '>=', today)\r\n          .orderBy('date')\r\n          .startAfter(startAfter)\r\n          .limit(2))\r\n      : (query = eventsRef\r\n          .where('date', '>=', today)\r\n          .orderBy('date')\r\n          .limit(2))\r\n\r\n    let querySnap = await query.get()\r\n\r\n    if (querySnap.docs.length === 0) {\r\n      dispatch(asyncActionFinish())\r\n      return querySnap\r\n    }\r\n\r\n    let events = []\r\n\r\n    for (let i = 0; i < querySnap.docs.length; i++) {\r\n      let evt = { ...querySnap.docs[i].data(), id: querySnap.docs[i].id }\r\n      events.push(evt)\r\n    }\r\n\r\n    dispatch({ type: FETCH_EVENTS, payload: { events } })\r\n    dispatch(asyncActionFinish())\r\n    return querySnap\r\n  } catch (error) {\r\n    console.log(error)\r\n    dispatch(asyncActionError())\r\n  }\r\n}\r\n\r\nexport const addEventComment = (eventId, values, parentId) => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase }\r\n) => {\r\n  const firebase = getFirebase()\r\n  const profile = getState().firebase.profile\r\n  const user = firebase.auth().currentUser\r\n  let newComment = {\r\n    parentId: parentId,\r\n    displayName: profile.displayName,\r\n    photoURL: profile.photoURL,\r\n    uid: user.uid,\r\n    text: values.comment,\r\n    date: Date.now()\r\n  }\r\n  try {\r\n    await firebase.push(`event_chat/${eventId}`, newComment)\r\n  } catch (error) {\r\n    console.log(error)\r\n    toastr.error('Oops', 'Problem adding comment')\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Form, Label } from 'semantic-ui-react'\r\n\r\nconst TextArea = ({\r\n  input,\r\n  rows,\r\n  type,\r\n  placeholder,\r\n  meta: { touched, error }\r\n}) => {\r\n  return (\r\n    <Form.Field error={touched && !!error}>\r\n      <textarea {...input} placeholder={placeholder} rows={rows} />\r\n      {touched && error && (\r\n        <Label basic color='red'>\r\n          {error}\r\n        </Label>\r\n      )}\r\n    </Form.Field>\r\n  )\r\n}\r\n\r\nexport default TextArea\r\n","import React from 'react'\r\nimport { Segment, Image, Item, Header, Button, Label } from 'semantic-ui-react'\r\nimport format from 'date-fns/format'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst eventImageStyle = {\r\n  filter: 'brightness(30%)'\r\n}\r\n\r\nconst eventImageTextStyle = {\r\n  position: 'absolute',\r\n  bottom: '5%',\r\n  left: '5%',\r\n  width: '100%',\r\n  height: 'auto',\r\n  color: 'white'\r\n}\r\n\r\nconst EventDetailedHeader = ({\r\n  loading,\r\n  event,\r\n  isHost,\r\n  isGoing,\r\n  goingToEvent,\r\n  cancelGoingToEvent,\r\n  authenticated,\r\n  openModal\r\n}) => {\r\n  return (\r\n    <Segment.Group>\r\n      <Segment basic attached='top' style={{ padding: '0' }}>\r\n        <Image\r\n          src={`/assets/categoryImages/${event.category}.jpg`}\r\n          fluid\r\n          style={eventImageStyle}\r\n        />\r\n\r\n        <Segment basic style={eventImageTextStyle}>\r\n          <Item.Group>\r\n            <Item>\r\n              <Item.Content>\r\n                <Header\r\n                  size='huge'\r\n                  content={event.title}\r\n                  style={{ color: 'white' }}\r\n                />\r\n                <p>{format(event.date, 'dddd Do MMMM')}</p>\r\n                <p>\r\n                  Hosted by <strong>{event.hostedBy}</strong>\r\n                </p>\r\n              </Item.Content>\r\n            </Item>\r\n          </Item.Group>\r\n        </Segment>\r\n      </Segment>\r\n\r\n      <Segment attached='bottom'>\r\n        {!isHost && (\r\n          <div>\r\n            {isGoing && !event.cancelled && (\r\n              <Button onClick={() => cancelGoingToEvent(event)}>\r\n                Cancel My Place\r\n              </Button>\r\n            )}\r\n\r\n            {!isGoing && authenticated && !event.cancelled && (\r\n              <Button\r\n                loading={loading}\r\n                onClick={() => goingToEvent(event)}\r\n                color='teal'\r\n              >\r\n                JOIN THIS EVENT\r\n              </Button>\r\n            )}\r\n\r\n            {!authenticated && !event.cancelled && (\r\n              <Button\r\n                loading={loading}\r\n                onClick={() => openModal('UnauthModal')}\r\n                color='teal'\r\n              >\r\n                JOIN THIS EVENT\r\n              </Button>\r\n            )}\r\n\r\n            {event.cancelled && !isHost && (\r\n              <Label\r\n                size='large'\r\n                color='red'\r\n                content='This has been cancelled'\r\n              />\r\n            )}\r\n          </div>\r\n        )}\r\n        {isHost && (\r\n          <Button as={Link} to={`/manage/${event.id}`} color='orange'>\r\n            Manage Event\r\n          </Button>\r\n        )}\r\n      </Segment>\r\n    </Segment.Group>\r\n  )\r\n}\r\n\r\nexport default EventDetailedHeader\r\n","import React from 'react'\r\nimport { Segment, Icon } from 'semantic-ui-react'\r\nimport GoogleMapReact from 'google-map-react'\r\n\r\nconst Marker = () => <Icon name='marker' size='big' color='red' />\r\n\r\nconst EventDetailedMap = ({ lat, lng }) => {\r\n  const center = [lat, lng]\r\n  const zoom = 14\r\n  return (\r\n    <Segment attached='bottom' style={{ padding: 0 }}>\r\n      <div style={{ height: '300px', width: '100%' }}>\r\n        <GoogleMapReact\r\n          bootstrapURLKeys={{ key: 'AIzaSyDUX8SIqI2_TkxTUFkNQeqIyO4urAqgrt0' }}\r\n          defaultCenter={center}\r\n          defaultZoom={zoom}\r\n        >\r\n          <Marker lat={lat} lng={lng} />\r\n        </GoogleMapReact>\r\n      </div>\r\n    </Segment>\r\n  )\r\n}\r\n\r\nexport default EventDetailedMap\r\n","import React, { Component } from 'react'\r\nimport { Segment, Grid, Icon, Button } from 'semantic-ui-react'\r\nimport EventDetailedMap from './EventDetailedMap'\r\nimport format from 'date-fns/format'\r\n\r\nclass EventDetailedInfo extends Component {\r\n  state = {\r\n    showMap: false\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState({\r\n      showMap: false\r\n    })\r\n  }\r\n\r\n  showMapToggle = () => {\r\n    this.setState(prevState => ({\r\n      showMap: !prevState.showMap\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const { event } = this.props\r\n    return (\r\n      <Segment.Group>\r\n        <Segment attached='top'>\r\n          <Grid>\r\n            <Grid.Column width={1}>\r\n              <Icon size='large' color='teal' name='info' />\r\n            </Grid.Column>\r\n            <Grid.Column width={15}>\r\n              <p>{event.description}</p>\r\n            </Grid.Column>\r\n          </Grid>\r\n        </Segment>\r\n        <Segment attached>\r\n          <Grid verticalAlign='middle'>\r\n            <Grid.Column width={1}>\r\n              <Icon name='calendar' size='large' color='teal' />\r\n            </Grid.Column>\r\n            <Grid.Column width={15}>\r\n              <span>\r\n                {format(event.date, 'dddd Do MMM')} at{' '}\r\n                {format(event.date, 'h:mm A')}\r\n              </span>\r\n            </Grid.Column>\r\n          </Grid>\r\n        </Segment>\r\n        <Segment attached>\r\n          <Grid verticalAlign='middle'>\r\n            <Grid.Column width={1}>\r\n              <Icon name='marker' size='large' color='teal' />\r\n            </Grid.Column>\r\n            <Grid.Column width={11}>\r\n              <span>{event.venue}</span>\r\n            </Grid.Column>\r\n            <Grid.Column width={4}>\r\n              <Button\r\n                onClick={this.showMapToggle}\r\n                color='teal'\r\n                size='tiny'\r\n                content={this.state.showMap ? 'Hide Map' : 'Show Map'}\r\n              />\r\n            </Grid.Column>\r\n          </Grid>\r\n        </Segment>\r\n        {this.state.showMap && (\r\n          <EventDetailedMap\r\n            lat={event.venueLatLng.lat}\r\n            lng={event.venueLatLng.lng}\r\n          />\r\n        )}\r\n      </Segment.Group>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EventDetailedInfo\r\n","import React, { Component } from 'react'\nimport { Form, Button } from 'semantic-ui-react'\nimport { Field, reduxForm } from 'redux-form'\nimport TextArea from '../../../app/common/form/TextArea'\n\nclass EventDetailedChatForm extends Component {\n  handleCommentSubmit = values => {\n    const { addEventComment, reset, eventId, closeForm, parentId } = this.props\n    addEventComment(eventId, values, parentId)\n    reset()\n    if (parentId !== 0) {\n      closeForm()\n    }\n  }\n\n  render() {\n    return (\n      <Form onSubmit={this.props.handleSubmit(this.handleCommentSubmit)}>\n        <Field name='comment' type='text' component={TextArea} rows={2} />\n        <Button content='Add Reply' labelPosition='left' icon='edit' primary />\n      </Form>\n    )\n  }\n}\n\nexport default reduxForm({ Fields: 'comment' })(EventDetailedChatForm)\n","import React, { Component } from 'react'\r\nimport { Segment, Header, Comment } from 'semantic-ui-react'\r\nimport EventDetailedChatForm from './EventDetailedChatForm'\r\nimport { Link } from 'react-router-dom'\r\nimport distanceInWords from 'date-fns/distance_in_words'\r\n\r\nclass EventDetailedChat extends Component {\r\n  state = {\r\n    showReplyForm: false,\r\n    selectedCommentId: null\r\n  }\r\n\r\n  handleCloseReplyForm = () => {\r\n    this.setState({\r\n      selectedCommentId: null,\r\n      showReplyForm: false\r\n    })\r\n  }\r\n\r\n  handleOpenReplyForm = id => () => {\r\n    this.setState({\r\n      showReplyForm: true,\r\n      selectedCommentId: id\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { addEventComment, eventId, eventChat } = this.props\r\n    const { showReplyForm, selectedCommentId } = this.state\r\n    return (\r\n      <div>\r\n        <Segment\r\n          textAlign='center'\r\n          attached='top'\r\n          inverted\r\n          color='teal'\r\n          style={{ border: 'none' }}\r\n        >\r\n          <Header>Chat about this event</Header>\r\n        </Segment>\r\n\r\n        <Segment attached>\r\n          <Comment.Group>\r\n            {eventChat &&\r\n              eventChat.map(comment => (\r\n                <Comment key={comment.id}>\r\n                  <Comment.Avatar\r\n                    src={comment.photoURL || '/assets/user.png'}\r\n                  />\r\n                  <Comment.Content>\r\n                    <Comment.Author as={Link} to={`/profile/${comment.uid}`}>\r\n                      {comment.displayName}\r\n                    </Comment.Author>\r\n                    <Comment.Metadata>\r\n                      <div>{distanceInWords(comment.date, Date.now())} ago</div>\r\n                    </Comment.Metadata>\r\n                    <Comment.Text>{comment.text}</Comment.Text>\r\n                    <Comment.Actions>\r\n                      <Comment.Action\r\n                        onClick={this.handleOpenReplyForm(comment.id)}\r\n                      >\r\n                        Reply\r\n                      </Comment.Action>\r\n                      {showReplyForm && selectedCommentId === comment.id && (\r\n                        <EventDetailedChatForm\r\n                          addEventComment={addEventComment}\r\n                          eventId={eventId}\r\n                          form={`reply_${comment.id}`}\r\n                          closeForm={this.handleCloseReplyForm}\r\n                          parentId={comment.id}\r\n                        />\r\n                      )}\r\n                    </Comment.Actions>\r\n                  </Comment.Content>\r\n\r\n                  {comment.childNodes &&\r\n                    comment.childNodes.map(child => (\r\n                      <Comment.Group key={child.id}>\r\n                        <Comment>\r\n                          <Comment.Avatar\r\n                            src={child.photoURL || '/assets/user.png'}\r\n                          />\r\n                          <Comment.Content>\r\n                            <Comment.Author\r\n                              as={Link}\r\n                              to={`/profile/${child.uid}`}\r\n                            >\r\n                              {child.displayName}\r\n                            </Comment.Author>\r\n                            <Comment.Metadata>\r\n                              <div>\r\n                                {distanceInWords(child.date, Date.now())} ago\r\n                              </div>\r\n                            </Comment.Metadata>\r\n                            <Comment.Text>{child.text}</Comment.Text>\r\n                            <Comment.Actions>\r\n                              <Comment.Action\r\n                                onClick={this.handleOpenReplyForm(child.id)}\r\n                              >\r\n                                Reply\r\n                              </Comment.Action>\r\n                              {showReplyForm &&\r\n                                selectedCommentId === child.id && (\r\n                                  <EventDetailedChatForm\r\n                                    addEventComment={addEventComment}\r\n                                    eventId={eventId}\r\n                                    form={`reply_${child.id}`}\r\n                                    closeForm={this.handleCloseReplyForm}\r\n                                    parentId={child.parentId}\r\n                                  />\r\n                                )}\r\n                            </Comment.Actions>\r\n                          </Comment.Content>\r\n                        </Comment>\r\n                      </Comment.Group>\r\n                    ))}\r\n                </Comment>\r\n              ))}\r\n          </Comment.Group>\r\n          <EventDetailedChatForm\r\n            parentId={0}\r\n            addEventComment={addEventComment}\r\n            eventId={eventId}\r\n            form={'newComment'}\r\n          />\r\n        </Segment>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EventDetailedChat\r\n","import React from 'react'\r\nimport { Segment, List, Item, Label } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst EventDetailedSidebar = ({ attendees }) => {\r\n  return (\r\n    <div>\r\n      <Segment\r\n        textAlign='center'\r\n        style={{ border: 'none' }}\r\n        attached='top'\r\n        secondary\r\n        inverted\r\n        color='teal'\r\n      >\r\n        {attendees && attendees.length}{' '}\r\n        {attendees && attendees.length === 1 ? 'Person' : 'People'} Going\r\n      </Segment>\r\n      <Segment attached>\r\n        <List relaxed divided>\r\n          {attendees &&\r\n            attendees.map(attendee => (\r\n              <Item key={attendee.id} style={{ position: 'relative' }}>\r\n                {attendee.host && (\r\n                  <Label\r\n                    style={{ position: 'absolute' }}\r\n                    color='orange'\r\n                    ribbon='right'\r\n                  >\r\n                    Host\r\n                  </Label>\r\n                )}\r\n                <Item.Image size='tiny' src={attendee.photoURL} />\r\n                <Item.Content verticalAlign='middle'>\r\n                  <Item.Header as='h3'>\r\n                    <Link to={`/profile/${attendee.id}`}>\r\n                      {attendee.displayName}\r\n                    </Link>\r\n                  </Item.Header>\r\n                </Item.Content>\r\n              </Item>\r\n            ))}\r\n        </List>\r\n      </Segment>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EventDetailedSidebar\r\n","import React, { Component } from 'react'\r\nimport { Grid } from 'semantic-ui-react'\r\nimport { connect } from 'react-redux'\r\nimport { toastr } from 'react-redux-toastr'\r\nimport { withFirestore, firebaseConnect, isEmpty } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport EventDetailedHeader from './EventDetailedHeader'\r\nimport EventDetailedInfo from './EventDetailedInfo'\r\nimport EventDetailedChat from './EventDetailedChat'\r\nimport EventDetailedSidebar from './EventDetailedSidebar'\r\nimport { objectToArray, createDataTree } from '../../../app/common/util/helpers'\r\nimport { goingToEvent, cancelGoingToEvent } from '../../user/userActions'\r\nimport { addEventComment } from '../eventActions'\r\nimport { openModal } from '../../modals/modalActions'\r\nimport LoadingComponent from '../../../app/layout/LoadingComponent'\r\n\r\nconst mapState = (state, ownProps) => {\r\n  let event = {}\r\n\r\n  if (state.firestore.ordered.events && state.firestore.ordered.events[0]) {\r\n    event = state.firestore.ordered.events[0]\r\n  }\r\n\r\n  return {\r\n    requesting: state.firestore.status.requesting,\r\n    event,\r\n    loading: state.async.loading,\r\n    auth: state.firebase.auth,\r\n    eventChat:\r\n      !isEmpty(state.firebase.data.event_chat) &&\r\n      objectToArray(state.firebase.data.event_chat[ownProps.match.params.id])\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  goingToEvent,\r\n  cancelGoingToEvent,\r\n  addEventComment,\r\n  openModal\r\n}\r\n\r\nclass EventDetailedPage extends Component {\r\n  state = {\r\n    initialLoading: true\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { firestore, match } = this.props\r\n    let event = await firestore.get(`events/${match.params.id}`)\r\n    if (!event.exists) {\r\n      toastr.error('Not Found', 'This is not the event are looking for')\r\n      this.props.history.push('/error')\r\n    }\r\n    await firestore.setListener(`events/${match.params.id}`)\r\n    this.setState({\r\n      initialLoading: false\r\n    })\r\n  }\r\n\r\n  async componentWillUnmount() {\r\n    const { firestore, match } = this.props\r\n    await firestore.unsetListener(`events/${match.params.id}`)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      openModal,\r\n      event,\r\n      auth,\r\n      goingToEvent,\r\n      cancelGoingToEvent,\r\n      addEventComment,\r\n      eventChat,\r\n      loading,\r\n      requesting,\r\n      match\r\n    } = this.props\r\n    const attendees =\r\n      event &&\r\n      event.attendees &&\r\n      objectToArray(event.attendees).sort(function(a, b) {\r\n        return a.joinDate - b.joinDate\r\n      })\r\n    const isHost = event.hostUid === auth.uid\r\n    const isGoing = attendees && attendees.some(a => a.id === auth.uid)\r\n    const chatTree = !isEmpty(eventChat) && createDataTree(eventChat)\r\n    const authenticated = auth.isLoaded && !auth.isEmpty\r\n    const loadingEvent = requesting[`events/${match.params.id}`]\r\n\r\n    if (loadingEvent || this.state.initialLoading)\r\n      return <LoadingComponent inverted={true} />\r\n\r\n    return (\r\n      <Grid>\r\n        <Grid.Column width={10}>\r\n          <EventDetailedHeader\r\n            event={event}\r\n            loading={loading}\r\n            isHost={isHost}\r\n            isGoing={isGoing}\r\n            goingToEvent={goingToEvent}\r\n            cancelGoingToEvent={cancelGoingToEvent}\r\n            authenticated={authenticated}\r\n            openModal={openModal}\r\n          />\r\n          <EventDetailedInfo event={event} />\r\n          {authenticated && (\r\n            <EventDetailedChat\r\n              addEventComment={addEventComment}\r\n              eventId={event.id}\r\n              eventChat={chatTree}\r\n            />\r\n          )}\r\n        </Grid.Column>\r\n        <Grid.Column width={6}>\r\n          <EventDetailedSidebar attendees={attendees} />\r\n        </Grid.Column>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  withFirestore,\r\n  connect(\r\n    mapState,\r\n    actions\r\n  ),\r\n  firebaseConnect(props => [`event_chat/${props.match.params.id}`])\r\n)(EventDetailedPage)\r\n"],"sourceRoot":""}